## Data Catalog
- Прописываем как выглядят джойны
- Подумать как фиксировать гранулярность
- Подумать как правильно работать с календарем. Когда у нас есть дата и отдельно месяц (возможно, писать уровни гранулярности от другого столбца). Тут не только день месяц, но могут быть и другие вещи. Пример: есть колонка магазина и колонка города. Если идет select по магазину, то это означает, что город можно смело убирать из select и не добавлять group by. То есть. Нужно определять иерархию гранулярности таблицы. Уровень 1 - нижний уровень. Если select строится полностью на уровне один, значит, group by не нужен. Если хоть что-то из уровня 1 пропушено, group by нужен
- Расчитанные показатели, которые нельзя складывать. Иметь рассчитанные показатели на уровне 1 и выводить их, если просто select и заменять на формулу, запрещая прямые агрегации. Например, у нас есть доля потерь и колонка потери/поставку, при группировки она заменяется на sum(потери)/sum(поставки). Может быть даже у нас должны быть просто виртуальные колонки, где прописана формула, без физических
- Когда мы выбрали фактовую таблицу, необходимо подтянуть все таблицы, которые можно в теории приджойнить. Причем подсветить что может быть актуально для этой таблицы
- Придумать что делать, если мы джойним несколько раз один и тот же dimension. Например, в фактовой таблице у нас три даты, значит 3 потенциальных join dim_calend. Возможно, прибавлять к dim_calendar при выборе человека, то поле, к которому джойнится. Соответственно, при прописывании джойнов, у нас должно быть понимание по какому полю идет join
- Подумать о сохранении временных вьюх для скоростного select
- Нужно сделать в явном виде какие есть родительские и агрегированные таблицы
- У таблиц прописать к каким направлениям они относятся
- Система джойнов. Необходимо сделать логику, если джойн с одной таблицей и если появляется вторая, например, надо добавить новые условия. +запреты на джойны. Например, если только 1 таблица, то джойн можно. Добавляется вторая и становится нельзя
- Enterprise Data Warehouse Bus Matrix - как по Кимбалу. Строки - бизнес процесс, столбцы - показатели. Необходим справочник alias, который связывает фактовые таблицы и справочники. То есть. Нам пришла новая таблица. Дальше к каждому полю мы либо присваиваем новый alias или выбираем из существующих
- Более короткие справочники - например, когда у нас нет дней, но есть месяц
- В фактовой таблице может быть несколько дат. Для них нужно джойнить много календарей из одного словаря
